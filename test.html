<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Classtrophobic Test Page</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <style>
    my-div { cursor: pointer; }
    my-element, my-div, button[is=my-button] { margin: 8px; }
    </style>
    <script defer src="//cdnjs.cloudflare.com/ajax/libs/document-register-element/1.3.0/document-register-element.js"></script>
    <script>var Class=function(a){'use strict';/*! (C) 2017 Andrea Giammarchi - MIT Style License */var b=['constructor','extends','static'],c=a.prototype,d=a.getPrototypeOf||function(l){return l.__proto__},e=a.setPrototypeOf||function(l,m){return l.__proto__=m,l},f=a.getOwnPropertyDescriptor,g=a.getOwnPropertySymbols?function(m){return a.getOwnPropertySymbols(m).concat(a.getOwnPropertyNames(m))}:a.getOwnPropertyNames,h=a.defineProperty,i=a.defineProperties,j={get:function(){var l=function(){var r;e(m,d(n));try{r=m.constructor.apply(m,arguments)}finally{e(m,n)}return r?e(r,n):m},m=this,n=d(m),q=n;if(n){e(l,n);do g(q).forEach(function(r){if(!l.hasOwnProperty(r)){var s=f(q,r),t=s.value;'function'==typeof t&&(s.value=function(){var w,x=n;do x=d(x);while(t===x[r]);try{w=x[r].apply(e(m,x),arguments)}finally{e(m,n)}return w},h(l,r,s))}});while((q=d(q))&&q!==c)}return l}},k={get:function(){var l={},m=this,n=m;do g(n).forEach(function(q){var r=f(n,q),s=r.value;'function'==typeof s&&(r.value=function(){for(var v,t=d(m),u=m[q],w=t;u===w[q];)w=d(w);m.method=w[q];try{v=m.method.apply(e(m,d(w)),arguments)}finally{e(m,t).method=u}return v},h(l,q,r))});while((n=d(n))&&n!==Function);return l}};return function(m){var n=m.constructor,q=m['static'],r=m['extends'],s=m.hasOwnProperty('constructor')?function(){return n.apply(this,arguments)||this}:r?function(){var v=r.apply(this,arguments);return v?e(v,s.prototype):this}:function(){},t={'super':k},u={'super':j};return r&&(e(s,r),e(s.prototype,r.prototype)),g(m).forEach(function(v){0>b.indexOf(v)&&(u[v]=f(m,v),u[v].enumerable=!1)}),i(s.prototype,u),q&&g(q).forEach(function(v){t[v]=f(q,v),t[v].enumerable=!1}),i(s,t)}}(Object);try{module.exports=Class}catch(a){}


    this.onload = function () {
      // Native Subclass
      const List = Class({
        extends: Array,
        constructor: function() {
          var self = this.super();
          self.push.apply(self, arguments);
          return self;
        }
      });

      const ml = new List(1, 2, 3);
      console.log(
        ml instanceof Array,  // true
        ml instanceof List,   // true
        ml                    // [1, 2, 3]
      );

      // - - - - - - - - - - - - - - - - - - - - - -

      // Custom Element
      const MyElement = Class({
        extends: HTMLElement
      });
      customElements.define('my-element', MyElement);

      document.body.appendChild(new MyElement).textContent = 'my element';
      document.body.appendChild(
        document.createElement('my-element')
      ).textContent = 'my element';

      // - - - - - - - - - - - - - - - - - - - - - -

      // Custom Element with super()
      const MyDiv = Class({
        extends: HTMLElement,
        constructor: function () {
          var self = this.super.apply(this, arguments);
          self.addEventListener('click', console.log);
          return self;
        }
      });
      customElements.define('my-div', MyDiv);

      document.body.appendChild(new MyDiv).textContent = 'my div';
      document.body.appendChild(
        document.createElement('my-div')
      ).textContent = 'my div';

      // - - - - - - - - - - - - - - - - - - - - - -

      // Custom Element native extend with super()
      // requires Custom Elements V1 polyfill
      // https://github.com/WebReflection/document-register-element
      const MyButton = Class({
        extends: HTMLButtonElement,
        constructor: function () {
          var self = this.super.apply(this, arguments);
          self.addEventListener('click', console.log);
          return self;
        }
      });

      customElements.define('my-button', MyButton, {extends: 'button'});

      document.body.appendChild(new MyButton).textContent = 'my button';
      document.body.appendChild(
        document.createElement('button', {is:'my-button'})
      ).textContent = 'my button';

      document.body.style.backgroundColor = '#0FA';

    };
    </script>
  </head>
  <body></body>
</html>